## flyway备份表结构

## 知识点：

* 为啥需要flyway
* 有表结构可以简化数据恢复难度

### 教学难点：

学员对通过flyway备份数据库存在误解，有人会以为要把数据写进脚本，有人虽然觉得前者不对但不知道为何备份，如何备份。（目测主要原因是觉得要么就数据一个不丢，要么就全部丢掉）

### 段子

通过量刑引导折衷方案，阐明虽然还是可能丢失一些数据，但如果能找回表结构，能恢复大多数数据也不错。

讨论量刑问题。三年以下？三到五年？五到七年？七到十年？十年以上？无期？死缓？死立即？

通过定罪的严重性说明数据库备份的重要性。不断铺垫，引导对量刑升档。
* 删代码库判几年？三年以下
* 删线上一些不重要的列判几年？ 无期
* 删核心数据判几年？ 死立即

通过过失犯罪的主观恶性较小，打击应当从轻，甚至不与打击。（按照我国刑法，除非明确规定了过失也算犯罪，否则默认要求故意）
* 一般删库是过失删库还是故意删库？ 过失（故意的话怎么也防不了，直接死立即没毛病）
* 过失犯罪是否应该和故意犯罪同等量刑？ 不应该，应该更轻。
* 为啥应该更轻？是不是因为他本身是个好人（主观恶性小）？ 是
* 如果能恢复，避免客观上的实害结果，是不是可以不惩罚？ 是
* 如果很遗憾不能恢复，无法阻止客观危害，是不是还是得惩罚？ 是
* flyway只恢复表结构，可以大大减轻客观实害结果，从而救济过失犯，减轻甚至免除其刑罚。

讲解flyway通过恢复表结构的方式来恢复数据的技术细节
……
